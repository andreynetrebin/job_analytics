# Changelog

Все заметные изменения в этом проекте будут задокументированы в этом файле.

## [1.1.0] - 2025-07-01

### Изменения

- Добавлена поддержка авторизации через HeadHunter.
- Реализован механизм получения и хранения access и refresh токенов.

### Исправления

- Исправлены ошибки в обработке ответов от API.

## [1.2.0] - 2025-07-01

### Изменения

- Обновлен URL для получения токенов на `https://api.hh.ru/token` в соответствии с новой документацией API.
- Изменен метод отправки POST запроса для получения токенов на использование `application/x-www-form-urlencoded`.
- Добавлено логирование для отслеживания ответов от API и ошибок.

### Исправления

- Исправлена ошибка 405 "Method Not Allowed" при попытке получить токен.

## [1.3.0] - 2025-07-02

### Изменения

- Переход на использование ORM для упрощения работы с базой данных.
- Настроен механизм миграций для управления изменениями в структуре базы данных.
- Добавлена функция получения информации о вакансии по ID.
- Обновлена функция поиска вакансий с поддержкой пагинации.
- Создана отдельная таблица для хранения информации о зарплатах.

## [1.4.0] - 2025-07-03

### Изменения

- Добавлена таблица временного хранения вакансий для сверки данных.
- Реализовано хранение ключевых навыков и форматов работы с использованием связи многие-ко-многим.
- Добавлено хранение профессиональных ролей в базе данных.

## [1.5.0] - 2025-07-04

### Изменения

- Добавлена функция получения информации о работодателе по ID.
- Добавлена функция для сверки временной таблицы с основной таблицей вакансий.
- Обновлена структура базы данных: добавлены таблицы для хранения информации о работодателях и отраслях, о виде
  занятости, рабочих часах и графиках работы.
- Реализовано сохранение информации о работодателях и их отраслях из API.
- Реализован модуль для запуска сбора данных о вакансиях по расписанию.

## [1.6.0] - 2025-07-05

### Изменения

- Добавлена админская часть для обработки заявок на получение аналитической информации по поисковым запросам.
- Реализована пользовательская часть с возможностью отправки заявок на получение аналитической информации.
- Обновлена функция получения вакансий, теперь параметры текста подставляются из базы `search_queries`
  с `is_active = True`.

## [1.7.0] - 2025-07-07

### Изменения

- Декомпозиция модуля job_analytics.

## [1.8.0] - 2025-07-14

### Изменения

- Добавлены таблицы для хранения информации с учетом историчности о ключевых навыках и зарплате.
- Реализована обработка кейса возобновления вакансии.

## [1.9.0] - 2025-07-15

### Исправления

- Исправлено извлечение и сохранение данных о вакансиях и работодателях.

## [1.10.0] - 2025-07-20

### Изменения

- Реализовано возобновление архивных вакансий с обновлением статуса и историй.
- Добавлено обновление истории зарплаты при изменении данных о зарплате.
- Обновление ключевых навыков с учетом новых и ушедших навыков из вакансии.

## [1.11.0] - 2025-07-21

### Изменения

- Добавлена логика обработки вакансий, отсутствующих среди текущих полученных вакансий:
    - Запрос актуального статуса для каждой отсутствующей вакансии.
    - Обновление статуса на "Архивный" с записью в `VacancyStatusHistory`, если статус архивный.
    - Логирование для активных вакансий, которые не попали в сбор.
- Исправлена ошибка с вычитанием "naive" и "aware" объектов `datetime` в функции обновления статуса вакансии.

## [1.12.0] - 2025-07-22

### Изменения

- Добавлен ретрай сбора информации по вакансиям, упавшим с ошибкой.
- Реализован функционал отправки уведомлений на электронную почту о новых вакансиях на email.
- Исправлен метод отправки электронной почты:
    - Обновлен код функции `send_email` для использования SSL при отправке писем.
    - Добавлена обработка ошибок для более детального логирования проблем с аутентификацией и подключением к
      SMTP-серверу.

